<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Calculadora de Sub-rede</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Ajustando a margem para que a calculadora não sobreponha os anúncios */
    .content-wrapper {
      margin-right: 320px; /* Espaço para o anúncio vertical */
    }
    /* Espaço extra para evitar sobreposição do anúncio horizontal com a barra superior */
    body {
      padding-top: 80px; /* Ajuste de altura para a barra e o anúncio */
    }
  </style>
</head>
<body class="bg-gray-100 text-gray-800 min-h-screen">

  <!-- Barra Fixa no Topo -->
  <nav class="bg-blue-600 text-white fixed w-full top-0 left-0 z-50 shadow-md">
    <div class="max-w-7xl mx-auto px-4 py-3 flex items-center justify-between">
      <a href="#" class="text-xl font-semibold">Calculadora de Sub-rede</a>
      <div class="space-x-4">
        <a href="index.html" class="hover:text-gray-300">Início</a>
        <a href="https://www.exemplo.com" target="_blank" class="hover:text-gray-300">Link Externo</a>
      </div>
    </div>
  </nav>

  <!-- Anúncio Horizontal no Topo -->
  <div class="w-full bg-gray-200 p-2 mt-16"> <!-- Ajuste mt-16 para dar espaço à barra fixa -->
    <div class="max-w-7xl mx-auto">
      <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
      <ins class="adsbygoogle"
           style="display:block"
           data-ad-client="ca-pub-XXXXXX" <!-- Substitua pelo seu ID -->
           data-ad-slot="XXXXXX" <!-- Substitua pelo ID do seu slot de anúncio -->
           data-ad-format="auto"></ins>
      <script>
           (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
    </div>
  </div>

  <!-- Conteúdo Principal -->
  <main class="bg-gray-100 pt-16 px-4">
    <div class="content-wrapper max-w-3xl w-full bg-white shadow-lg rounded-lg p-6 mx-auto">
      <h1 class="text-2xl font-bold mb-4 text-center">Calculadora de Sub-rede</h1>
      <div class="mb-4">
        <label for="ip" class="block text-sm font-medium text-gray-700">Endereço IP (ex: 192.168.1.1)</label>
        <input type="text" id="ip" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2" placeholder="192.168.1.1" />
      </div>
      <div class="mb-4">
        <label for="mask" class="block text-sm font-medium text-gray-700">Máscara de Sub-rede</label>
        <select id="mask" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 bg-white">
           <option value="0">0.0.0.0 / 0</option>
        <option value="1">128.0.0.0 / 1</option>
        <option value="2">192.0.0.0 / 2</option>
        <option value="3">224.0.0.0 / 3</option>
        <option value="4">240.0.0.0 / 4</option>
        <option value="5">248.0.0.0 / 5</option>
        <option value="6">252.0.0.0 / 6</option>
        <option value="7">254.0.0.0 / 7</option>
        <option value="8">255.0.0.0 / 8</option>
        <option value="9">255.128.0.0 / 9</option>
        <option value="10">255.192.0.0 / 10</option>
        <option value="11">255.224.0.0 / 11</option>
        <option value="12">255.240.0.0 / 12</option>
        <option value="13">255.248.0.0 / 13</option>
        <option value="14">255.252.0.0 / 14</option>
        <option value="15">255.254.0.0 / 15</option>
        <option value="16">255.255.0.0 / 16</option>
        <option value="17">255.255.128.0 / 17</option>
        <option value="18">255.255.192.0 / 18</option>
        <option value="19">255.255.224.0 / 19</option>
        <option value="20">255.255.240.0 / 20</option>
        <option value="21">255.255.248.0 / 21</option>
        <option value="22">255.255.252.0 / 22</option>
        <option value="23">255.255.254.0 / 23</option>
        <option value="24" selected>255.255.255.0 / 24</option>
        <option value="25">255.255.255.128 / 25</option>
        <option value="26">255.255.255.192 / 26</option>
        <option value="27">255.255.255.224 / 27</option>
        <option value="28">255.255.255.240 / 28</option>
        <option value="29">255.255.255.248 / 29</option>
        <option value="30">255.255.255.252 / 30</option>
        <option value="31">255.255.255.254 / 31</option>
        <option value="32">255.255.255.255 / 32</option>
        </select>
      </div>
      <button onclick="calculate()" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-md font-semibold transition duration-200">
        Calcular
      </button>
      <div id="results" class="mt-6 hidden">
        <h2 class="text-xl font-semibold mb-4">Resultado:</h2>
        <div class="overflow-x-auto">
          <table class="min-w-full bg-white rounded-xl shadow">
            <tbody class="divide-y divide-gray-200" id="results-body">
              <!-- Resultados aparecerão aqui -->
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </main>

  <!-- Anúncio Vertical Lateral -->
  <div class="fixed top-1/4 right-0 w-64 bg-gray-200 p-4">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-XXXXXX" <!-- Substitua pelo seu ID -->
         data-ad-slot="XXXXXX" <!-- Substitua pelo ID do seu slot de anúncio -->
         data-ad-format="vertical"></ins>
    <script>
         (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
  </div>

  <script>
    function calculate() {
      const ip = document.getElementById("ip").value;
      const mask = parseInt(document.getElementById("mask").value);
      const resultsDiv = document.getElementById("results");
      const resultsBody = document.getElementById("results-body");

      if (!ip || isNaN(mask) || mask < 0 || mask > 32) {
        alert("Por favor, insira um IP válido e uma máscara entre 0 e 32.");
        return;
      }

      const ipParts = ip.split('.').map(Number);
      if (ipParts.length !== 4 || ipParts.some(p => isNaN(p) || p < 0 || p > 255)) {
        alert("Endereço IP inválido.");
        return;
      }

      const ipInt = ipParts.reduce((acc, octet) => (acc << 8) + octet, 0);
      const maskInt = 0xFFFFFFFF << (32 - mask) >>> 0;
      const networkInt = ipInt & maskInt;
      const broadcastInt = networkInt | (~maskInt >>> 0);

      const networkAddress = intToIp(networkInt);
      const broadcastAddress = intToIp(broadcastInt);
      const minHost = mask === 32 ? "-" : intToIp(networkInt + 1);
      const maxHost = mask === 32 ? "-" : intToIp(broadcastInt - 1);
      const validHosts = mask >= 31 ? 0 : (broadcastInt - networkInt - 1);

      const ipClass = getIpClass(ipParts[0]);

      const resultData = [
        ["Endereço IP", ip],
        ["Máscara de Sub-rede", mask],
        ["Endereço de Rede", networkAddress],
        ["Broadcast", broadcastAddress],
        ["Host Mínimo", minHost],
        ["Host Máximo", maxHost],
        ["Quantidade de Hosts Válidos", validHosts],
        ["Tipo de IP", ipClass]
      ];

      let resultHTML = "";
      resultData.forEach(([label, value]) => {
        resultHTML += `
          <tr>
            <td class="py-2 px-4 font-medium text-gray-700 bg-gray-50">${label}</td>
            <td class="py-2 px-4 text-gray-900">${value}</td>
          </tr>
        `;
      });

      resultsBody.innerHTML = resultHTML;
      resultsDiv.classList.remove("hidden");
    }

    function intToIp(int) {
      return [(int >>> 24), (int >>> 16 & 255), (int >>> 8 & 255), (int & 255)].join('.');
    }

    function getIpClass(firstOctet) {
      if (firstOctet >= 1 && firstOctet <= 126) return "Classe A";
      if (firstOctet >= 128 && firstOctet <= 191) return "Classe B";
      if (firstOctet >= 192 && firstOctet <= 223) return "Classe C";
      if (firstOctet >= 224 && firstOctet <= 239) return "Multicast (Classe D)";
      if (firstOctet >= 240 && firstOctet <= 255) return "Reservado (Classe E)";
      return "Desconhecido";
    }
  </script>
</body>
</html>
